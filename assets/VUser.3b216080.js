import{e,N as a,m as s,o as t,k as o,q as i,c as n,a as d,b as r,T as l,B as c,A as u,j as m,z as h,u as k,x as p,y,F as g,P as v}from"./vendor.45f5d20f.js";import{u as w,_ as L,i as C,a as f,b as M,c as I}from"./index.ffbdd121.js";import{m as b,a as B,_ as D}from"./mdb.umd.min.61317297.js";import{_ as x}from"./404.e420ed5b.js";const $={name:"DonationModal",emits:["close"],props:{show:{type:Boolean,default:!1},userAddress:{type:String,default:""}},components:{},data:()=>({componentKey:0,stateLoaded:!1,donationAmt:0,donationValid:!1,loading:!1}),mounted(){},methods:{async fireDonate(a){this.loading=!0;const{donationToUser:s}=w(),t=w(),{account:o}=e(t);o!=a?await s(a,this.donationAmt):console.log("can't donate to self"),this.loading=!1,this.$emit("close")},validateDonation(e){this.donationAmt=e.target.value,this.donationAmt>=0?this.donationValid=!0:this.donationValid=!1}},setup(){const e=new a({duration:2e3,position:{x:"center",y:"bottom"},types:[{type:"loading",background:"orange",duration:0,dismissible:!0,icon:{className:"icon icon-loading",tagName:"i"}}]});return s("notyf",e),{}}},A={key:0,class:"modal-donation-mask"},T={class:"login-box-donation"},U=d("h2",null,"Artist Donation",-1),P={class:"user-box-donation"},E=c("Amount to Send (MATIC) "),_={key:0,class:"warningTextDonation"},V={key:1,class:"successfulTextDonation"},H={class:"donateButton"},F=[d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),c(" Donate ")],O={key:1,class:"loading-donations animated fadeIn"},K=[d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1),c(" Donating "),d("div",{class:"bgFollow"},null,-1)],S={class:"modal-donations-footer"};$.render=function(e,a,s,c,u,m){return t(),o(l,{name:"modal"},{default:i((()=>[s.show?(t(),n("div",A,[d("div",T,[U,d("form",null,[d("div",P,[d("input",{type:"number",min:"0",step:".001",onInput:a[0]||(a[0]=e=>m.validateDonation(e))},null,32),d("label",null,[E,this.donationValid?r("",!0):(t(),n("span",_," (must be greater than 0) ")),this.donationValid?(t(),n("span",V," âœ“ ")):r("",!0)])]),d("div",H,[u.loading?r("",!0):(t(),n("a",{key:0,class:"donateHover",onClick:a[1]||(a[1]=e=>m.fireDonate(this.userAddress))},F)),u.loading?(t(),n("a",O,K)):r("",!0)])])]),d("div",S,[d("button",{class:"modal-donations-button",onClick:a[2]||(a[2]=a=>e.$emit("close"))}," x ")])])):r("",!0)])),_:1})};const N={name:"UserProfileHeader",components:{},data:()=>({componentKey:0,loading:!1,stateLoaded:!1,showDonationModal:!1}),mounted(){this.$nextTick((()=>{this.checkIsFollowing()}))},watch:{$route(e,a){e!==a&&this.checkIsFollowing()}},methods:{async checkIsFollowing(){const{getUserByOwner:e}=w();this.$route.params.name&&await e(this.$route.params.name.toLowerCase()),this.stateLoaded=!0},async updateParent(){const{getUserByOwner:e}=w();this.$route.params.name&&await e(this.$route.params.name.toLowerCase()),this.showDonationModal=!1},async fireDonate(a){this.loading=!0;const{donationToUser:s}=w(),t=w(),{account:o}=e(t);o!=a?(await s(a,1),await this.checkIsFollowing()):console.log("can't donate to self"),this.componentKey+=1,this.loading=!1}},setup(){const a=w(),{postedItems:s,user:t,account:o}=e(a);return{account:o,postedItems:s,user:t,getAvatar:e=>{let a=k(p,{seed:e,scale:80,translateY:-3}),s=new Blob([a],{type:"image/svg+xml"});return URL.createObjectURL(s)},createUserLink:e=>"https://rebelartists.github.io/user/".concat(e)}}},j={key:0,class:"wrapper2"},G={class:"box userAvatar"},W=["src"],R={class:"box addressHash"},q={class:"box shareButton"},z={class:"box likeCount"},Y={class:"box postCount"},J={class:"box amtEarned"};N.render=function(e,a,s,i,l,c){const k=$;return this.stateLoaded&&this.$route.params.name?(t(),n("div",j,[d("div",G,[d("div",null,[d("img",{src:i.getAvatar(this.$route.params.name.toLowerCase()),class:"round-image"},null,8,W)])]),d("div",R,u(this.$route.params.name.substring(0,4))+"..."+u(this.$route.params.name.slice(-4)),1),d("div",q,[l.loading?r("",!0):(t(),n("button",{key:0,class:"buttonConnectProfile",onClick:a[0]||(a[0]=e=>l.showDonationModal=!0)}," Donate ")),l.showDonationModal?(t(),o(h,{key:1,to:"body"},[m(k,{show:l.showDonationModal,userAddress:this.$route.params.name.toLowerCase(),onClose:c.updateParent},null,8,["show","userAddress","onClose"])])):r("",!0)]),d("div",z,u(i.user.totalLikes)+" likes",1),d("div",Y,u(i.user.postCount)+" posts",1),d("div",J,u(i.user.amtEarned)+" earned",1)])):r("",!0)};const Q={name:"UserGallery",emits:["like-event"],components:{MDBCard:b.exports.MDBCard,MDBCardBody:b.exports.MDBCardBody,MDBCardText:b.exports.MDBCardText,MDBCardImg:b.exports.MDBCardImg,ToggleFavorite:B,LikersModal:D,UploadModal:L},data:()=>({componentKey:0,showModal:!1,showLikersModal:!1,stateLoaded:!1,idToCheck:null,waveformOptions:{backend:"MediaElement",mediaControls:!0,interact:!1,barWidth:2,responsive:!0,height:195,hideScrollbar:!0,cursorWidth:0}}),mounted(){this.$nextTick((()=>{this.checkIsLiked()}))},methods:{async checkIsLiked(){const{isLiked:a,getPostsByOwner:s}=w(),t=w(),{postsArray:o}=e(t);this.$route.params.name&&(await s(this.$route.params.name),await a(o._rawValue)),this.stateLoaded=!0},async updateparent(){this.checkIsLiked(),this.componentKey+=1,this.$emit("like-event",!0)}},watch:{$route(e,a){e!==a&&this.checkIsLiked()}},setup(){const a=w(),{postedItems:s,likedArray:t,account:o}=e(a);return{isVideo:C,postedItems:s,likedArray:t,account:o,getCloudinaryUrlImage:f,getCloudinaryUrlVideo:M}}},X={key:0},Z={key:0,class:"container"},ee=d("div",{class:"bg"},null,-1),ae=d("h3",null,"custom header",-1),se={key:1,class:"container"},te={class:"wrapperGallery"},oe={class:"media-wrap-gallery"},ie={class:"figureClass"},ne={key:0,class:"card-img-style-gallery",controls:"",controlsList:"nodownload"},de=["src"],re={key:1,class:"audioCardGallery"},le=["onClick"],ce={key:1,id:"favoriting"},ue={key:2,id:"favoriting"};Q.render=function(e,a,s,l,k,p){const w=y("UploadModal"),L=y("wavesurfer"),C=y("MDBCardImg"),f=y("router-link"),M=y("MDBCardText"),I=D,b=B,x=y("MDBCardBody"),$=y("MDBCard");return this.stateLoaded?(t(),n("div",X,[l.postedItems[0]||l.account!=this.$route.params.name?r("",!0):(t(),n("div",Z,[ee,d("button",{class:"modalButton",id:"show-modal",onClick:a[0]||(a[0]=e=>k.showModal=!0)}," + "),(t(),o(h,{to:"body"},[m(w,{show:k.showModal,onClose:a[1]||(a[1]=e=>k.showModal=!1)},{header:i((()=>[ae])),_:1},8,["show"])]))])),l.postedItems[0]||l.account==this.$route.params.name?r("",!0):(t(),n("div",se," no posts yet. ")),d("div",te,[(t(!0),n(g,null,v(l.postedItems,((e,s)=>(t(),n("div",{class:"gallery-panel",key:s},[d("div",oe,[m($,{class:"card-style hover-overlay"},{default:i((()=>[m(f,{to:`/post/${e.id}`,"active-class":"active",exact:""},{default:i((()=>[d("figure",ie,["video"==e.mediaType?(t(),n("video",ne,[d("source",{src:l.getCloudinaryUrlVideo(e.mediaHash)},null,8,de)])):r("",!0),"audio"==e.mediaType?(t(),n("div",re,[m(L,{src:l.getCloudinaryUrlVideo(e.mediaHash),options:k.waveformOptions},null,8,["src","options"])])):r("",!0),"image"==e.mediaType?(t(),o(C,{key:2,src:l.getCloudinaryUrlImage(e.mediaHash),top:"",hover:"",alt:"...",class:"card-img-style-gallery"},null,8,["src"])):r("",!0)])])),_:2},1032,["to"]),m(x,{class:"card-body"},{default:i((()=>[m(M,{class:"cardName"},{default:i((()=>[c(u(e.name),1)])),_:2},1024),m(M,null,{default:i((()=>[d("a",{class:"likesHover",onClick:a=>(k.showLikersModal=!0,k.idToCheck=e.id)},u(e.likes)+" likes ",9,le),k.showLikersModal&&k.idToCheck==e.id?(t(),o(h,{key:0,to:"body"},[m(I,{show:k.showLikersModal,postId:e.id,onClose:a[2]||(a[2]=e=>k.showLikersModal=!1)},null,8,["show","postId"])])):r("",!0),l.likedArray[s]?r("",!0):(t(),n("div",ce,[m(b,{id:e.id,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])),l.likedArray[s]?(t(),n("div",ue,[m(b,{id:e.id,intialFavorited:!0,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])):r("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):r("",!0)};const me={name:"UserLikedGallery",emits:["like-event"],components:{MDBCard:b.exports.MDBCard,MDBCardBody:b.exports.MDBCardBody,MDBCardText:b.exports.MDBCardText,MDBCardImg:b.exports.MDBCardImg,ToggleFavorite:B},data:()=>({componentKey:0,showModal:!1,showLikersModal:!1,stateLoaded:!1,idToCheck:null,waveformOptions:{backend:"MediaElement",mediaControls:!0,interact:!1,barWidth:2,responsive:!0,height:195,hideScrollbar:!0,cursorWidth:0}}),mounted(){this.$nextTick((()=>{this.checkIsLiked()}))},methods:{async checkIsLiked(){const{isLiked:a,getLikedPostsByOwner:s}=w(),t=w(),{likedPostArray:o}=e(t);this.$route.params.name&&(await s(this.$route.params.name),await a(o._rawValue)),this.stateLoaded=!0},async updateparent(){this.checkIsLiked(),this.componentKey+=1,this.$emit("like-event",!0)}},watch:{$route(e,a){e!==a&&this.checkIsLiked()}},setup(){const a=w(),{likedPostItems:s,likedArray:t,account:o}=e(a);return{likedPostItems:s,likedArray:t,account:o,getCloudinaryUrlImage:f,getCloudinaryUrlVideo:M}}},he={key:0},ke={key:0,class:"container"},pe={class:"wrapper"},ye={class:"media-wrap"},ge={class:"figureClassLiked"},ve={key:0,class:"card-img-style",controls:"",controlsList:"nodownload"},we=["src"],Le={key:1,class:"audioCardLiked"},Ce=["onClick"],fe={key:1,id:"favoriting"},Me={key:2,id:"favoriting"};me.render=function(e,a,s,l,k,p){const w=y("wavesurfer"),L=y("MDBCardImg"),C=y("router-link"),f=y("MDBCardText"),M=D,I=B,b=y("MDBCardBody"),x=y("MDBCard");return this.stateLoaded?(t(),n("div",he,[l.likedPostItems[0]?r("",!0):(t(),n("div",ke,"no liked posts yet.")),d("div",pe,[(t(!0),n(g,null,v(l.likedPostItems,((e,s)=>(t(),n("div",{class:"gallery-panel",key:s},[d("div",ye,[m(x,{class:"card-style hover-overlay"},{default:i((()=>[m(C,{to:`/post/${e.id}`,"active-class":"active",exact:""},{default:i((()=>[d("figure",ge,["video"==e.mediaType?(t(),n("video",ve,[d("source",{src:l.getCloudinaryUrlVideo(e.mediaHash)},null,8,we)])):r("",!0),"audio"==e.mediaType?(t(),n("div",Le,[m(w,{src:l.getCloudinaryUrlVideo(e.mediaHash),options:k.waveformOptions},null,8,["src","options"])])):r("",!0),"image"==e.mediaType?(t(),o(L,{key:2,src:l.getCloudinaryUrlImage(e.mediaHash),top:"",hover:"",alt:"...",class:"card-img-style"},null,8,["src"])):r("",!0)])])),_:2},1032,["to"]),m(b,{class:"card-body"},{default:i((()=>[m(f,{class:"cardName"},{default:i((()=>[c(u(e.name),1)])),_:2},1024),m(f,null,{default:i((()=>[d("a",{class:"likesHover",onClick:a=>(k.showLikersModal=!0,k.idToCheck=e.id)},u(e.likes)+" likes ",9,Ce),k.showLikersModal&&k.idToCheck==e.id?(t(),o(h,{key:0,to:"body"},[m(M,{show:k.showLikersModal,postId:e.id,onClose:a[0]||(a[0]=e=>k.showLikersModal=!1)},null,8,["show","postId"])])):r("",!0),l.likedArray[s]?r("",!0):(t(),n("div",fe,[m(I,{id:e.id,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])),l.likedArray[s]?(t(),n("div",Me,[m(I,{id:e.id,intialFavorited:!0,onLikeEvent:p.updateparent},null,8,["id","onLikeEvent"])])):r("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):r("",!0)};const Ie={name:"VUser",components:{ErrorPage:x,UserGallery:Q,UserLikedGallery:me,UserProfileHeader:N},props:{ready:{type:Boolean,default:!1}},data:()=>({componentKey:0,postReady:!1,stateLoaded:!1,showLikedPosts:!1}),mounted(){this.$nextTick((()=>{this.getUserContent()}))},methods:{async getUserContent(){const{getUserByOwner:e}=w();this.$route.params.name&&I(this.$route.params.name)&&await e(this.$route.params.name),this.stateLoaded=!0},async updateparent(){await this.getUserContent(),this.componentKey+=1},toggleShowLikedItems(){this.showLikedPosts=!this.showLikedPosts}},setup(){const t=new a({duration:2e3,position:{x:"center",y:"bottom"},types:[{type:"loading",background:"orange",duration:0,dismissible:!0,icon:{className:"icon icon-loading",tagName:"i"}}]}),o=w(),{account:i,user:n}=e(o);return s("notyf",t),{account:i,user:n,isAddress:I}}},be={id:"content"},Be={class:"main animated"},De={class:"main-content"},xe={key:0},$e={key:1},Ae={class:"toggleWrapper"},Te={key:0,class:"createdInactive"},Ue={key:0,class:"createdActive"},Pe=d("div",{class:"divider"},"|",-1),Ee={key:0,class:"likedInactive"},_e={key:1,class:"likedActive"};Ie.render=function(e,a,s,i,l,c){const u=y("ErrorPage"),h=N,k=Q,p=me;return t(),n("section",be,[d("div",Be,[d("div",De,[this.stateLoaded&&!i.isAddress(this.$route.params.name)?(t(),n("div",xe,[m(u)])):r("",!0),this.stateLoaded&&i.user&&i.isAddress(this.$route.params.name)?(t(),n("div",$e,[m(h),d("div",Ae,[d("a",{onClick:a[0]||(a[0]=(...e)=>c.toggleShowLikedItems&&c.toggleShowLikedItems(...e))},[l.showLikedPosts?(t(),n("div",Te,"created")):r("",!0)]),l.showLikedPosts?r("",!0):(t(),n("div",Ue,"created")),Pe,d("a",{onClick:a[1]||(a[1]=(...e)=>c.toggleShowLikedItems&&c.toggleShowLikedItems(...e))},[l.showLikedPosts?r("",!0):(t(),n("div",Ee,"liked"))]),l.showLikedPosts?(t(),n("div",_e,"liked")):r("",!0)]),l.showLikedPosts?r("",!0):(t(),o(k,{key:0,onLikeEvent:c.updateparent},null,8,["onLikeEvent"])),l.showLikedPosts?(t(),o(p,{key:1,onLikeEvent:c.updateparent},null,8,["onLikeEvent"])):r("",!0)])):r("",!0)])])])};export{Ie as default};
